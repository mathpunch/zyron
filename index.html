<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zyron</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="/ixlmath/baremux/index.js"></script>
    <script src="/ixlmath/scram/scramjet.all.js"></script>
    <script>
        navigator.serviceWorker.register("/ixlmath/sw.js")
    </script>
    <style>
        :root {
            --bg-color: #202124;
            --nav-bg: #35363a;
            --tab-active: #35363a;
            --tab-inactive: #202124;
            --accent: #8ab4f8;
            --text: #e8eaed;
            --input-bg: #202124;
            --border: #3c4043;
            --hover: #2d2e30;
        }

        body, html {
            margin: 0; padding: 0; height: 100%;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            overflow: hidden; color: var(--text);
        }

        /* --- BLACK HOLE LOADING SCREEN --- */
        #loading-screen {
            position: fixed; inset: 0;
            background: var(--bg-color);
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            z-index: 99999; 
            transition: opacity 0.5s ease;
        }
        .ring-3 { box-shadow: 0px 0px 10px 15px #fff; border-radius: 50%; padding: 2px; }
        .ring-2 { box-shadow: 0px 0px 2px 10px #000; border-radius: 50%; padding: 2px; }
        .ring-1 { box-shadow: 0px 0px 10px 15px #fff; border-radius: 50%; padding: 2px; }
        .black-hole { height: 128px; aspect-ratio: 1; background-color: black; border-radius: 50%; box-shadow: 0px 0px 20px 10px #000, inset 0px 0px 10px #ffffff88; position: relative; }
        .glow { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 350px; height: 350px; background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 5%, rgba(255, 255, 255, 0.1) 20%, rgba(255, 255, 255, 0) 70%); border-radius: 50%; z-index: -1; }
        .container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotateX(75deg); }
        .crescent { filter: drop-shadow(0px 0px 5px #fff) drop-shadow(0px 0px 15px #fff) drop-shadow(0px 0px 25px #fff) drop-shadow(0px 0px 50px #fff); position: absolute; color: transparent !important; top: 50%; left: 50%; transform: rotate(180deg); width: 200px; height: 12px; clip-path: ellipse(60% 100% at 100% 50%); offset-path: path("M 0,-100 A 100,100 0 1,1 0,100 A 100,100 0 1,1 0,-100 Z"); offset-distance: 0%; opacity: 0; }
        .crescent-1 { animation: moveOval 500ms ease-in-out 0ms infinite; }
        .crescent-2 { animation: moveOval 500ms ease-in-out 83ms infinite; }
        .crescent-3 { animation: moveOval 500ms ease-in-out 167ms infinite; }
        .crescent-4 { animation: moveOval 500ms ease-in-out 250ms infinite; }
        .crescent-5 { animation: moveOval 500ms ease-in-out 333ms infinite; }
        .crescent-6 { animation: moveOval 500ms ease-in-out 417ms infinite; }
        @keyframes moveOval { 18% { offset-distance: 25%; opacity: 0; } 25% { opacity: 1; } 75% { opacity: 1; } 100% { offset-distance: 90%; opacity: 0; } }

        /* --- ORIGINAL UI --- */
        .tab-strip { display: flex; align-items: flex-end; padding: 8px 10px 0 10px; background: var(--bg-color); gap: 5px; height: 34px; }
        .tab { background: var(--tab-inactive); padding: 6px 12px; border-radius: 8px 8px 0 0; font-size: 12px; min-width: 120px; color: #9aa0a6; cursor: pointer; display: flex; align-items: center; }
        .tab.active { background: var(--tab-active); color: var(--text); }
        .navbar { display: flex; align-items: center; height: 48px; background-color: var(--nav-bg); padding: 0 15px; gap: 12px; }
        .nav-buttons { display: flex; gap: 18px; font-size: 18px; color: #9aa0a6; }
        .nav-buttons span { cursor: pointer; user-select: none; }
        .search-container { flex-grow: 1; display: flex; align-items: center; background: var(--input-bg); border-radius: 20px; padding: 4px 18px; border: 1px solid var(--border); }
        .url-icon img { width: 14px; height: 14px; margin-right: 8px; }
        input#bar { flex-grow: 1; background: transparent; border: none; color: white; outline: none; }
        .frame-container { height: calc(100% - 82px); position: relative; }
        iframe { width: 100%; height: 100%; border: none; display: none; }
        iframe.active { display: block; }
    </style>
</head>
<body>

    <div id="loading-screen">
        <div class="ring-3"><div class="ring-2"><div class="ring-1"><div class="black-hole"></div><div class="glow"></div></div></div></div>
        <div class="container">
            <svg class="crescent crescent-1" viewBox="0 0 50 50"><path d="M 0 0 C 54 50 185 57 226 0 C 198 39 35 32 0 0" fill="#ffffff55"></path></svg>
            <svg class="crescent crescent-2" viewBox="0 0 50 50"><path d="M 0 0 C 54 50 185 57 226 0 C 198 39 35 32 0 0" fill="#ffffff55"></path></svg>
            <svg class="crescent crescent-3" viewBox="0 0 50 50"><path d="M 0 0 C 54 50 185 57 226 0 C 198 39 35 32 0 0" fill="#ffffff55"></path></svg>
            <svg class="crescent crescent-4" viewBox="0 0 50 50"><path d="M 0 0 C 54 50 185 57 226 0 C 198 39 35 32 0 0" fill="#ffffff55"></path></svg>
            <svg class="crescent crescent-5" viewBox="0 0 50 50"><path d="M 0 0 C 54 50 185 57 226 0 C 198 39 35 32 0 0" fill="#ffffff55"></path></svg>
            <svg class="crescent crescent-6" viewBox="0 0 50 50"><path d="M 0 0 C 54 50 185 57 226 0 C 198 39 35 32 0 0" fill="#ffffff55"></path></svg>
        </div>
        <p style="margin-top: 180px; letter-spacing: 2px;">ZYRON IS LOADING...</p>
    </div>

    <div class="tab-strip" id="tab-strip">
        <div class="add-tab" onclick="createNewTab()">+</div>
    </div>

    <nav class="navbar">
        <div class="nav-buttons">
            <span onclick="goBack()">←</span>
            <span onclick="goForward()">→</span>
            <span onclick="reloadPage()">↻</span>
        </div>
        <div class="search-container">
            <span id="url-icon" class="url-icon"><img src="internetlogo.png"></span>
            <input type="text" id="bar" placeholder="Search or enter URL">
        </div>
    </nav>

    <div class="frame-container" id="frame-container"></div>

    <script>
        const connection = new BareMux.BareMuxConnection("/ixlmath/baremux/worker.js");
        connection.setTransport("/ixlmath/libcurl/index.mjs", [{ websocket: "wss://ixlmathlogin.ixl.best/wisp/" }]);
        const { ScramjetController } = $scramjetLoadController();
        const scramjet = new ScramjetController({
            files: { all: "/ixlmath/scram/scramjet.all.js", wasm: "/ixlmath/scram/scramjet.wasm.wasm", sync: "/ixlmath/scram/scramjet.sync.js" },
            prefix: "/ixlmath/go/" 
        });
        scramjet.init();

        let tabs = [];
        let activeTabId = null;

        function showLoading() {
            const ls = document.getElementById('loading-screen');
            ls.style.display = 'flex';
            ls.style.opacity = '1';
        }

        function hideLoading() {
            const ls = document.getElementById('loading-screen');
            ls.style.opacity = '0';
            setTimeout(() => ls.style.display = 'none', 500);
        }

        function createNewTab() {
            const id = Date.now();
            tabs.push({ id, url: '', title: 'New Tab' });
            const frame = document.createElement('iframe');
            frame.id = `frame-${id}`;
            frame.onload = hideLoading;
            document.getElementById('frame-container').appendChild(frame);
            switchTab(id);
        }

        function switchTab(id) {
            activeTabId = id;
            document.querySelectorAll('iframe').forEach(f => f.classList.remove('active'));
            document.getElementById(`frame-${id}`).classList.add('active');
            renderTabs();
        }

        function navigateToUrl(input) {
            showLoading();
            let url = input.trim();
            if (!url.startsWith('http')) {
                url = (url.includes('.') && !url.includes(' ')) ? 'https://' + url : 'https://www.google.com/search?q=' + encodeURIComponent(url);
            }
            document.getElementById(`frame-${activeTabId}`).src = scramjet.encodeUrl(url);
            updateUrlIcon(url);
        }

        function updateUrlIcon(url) {
            const icon = document.getElementById('url-icon');
            icon.innerHTML = url.startsWith('https://') 
                ? '<img src="sucurehttpsicon.png">' 
                : '<img src="internetlogo.png">';
        }

        function renderTabs() {
            const strip = document.getElementById('tab-strip');
            strip.querySelectorAll('.tab').forEach(t => t.remove());
            tabs.forEach(tab => {
                const tabEl = document.createElement('div');
                tabEl.className = `tab ${tab.id === activeTabId ? 'active' : ''}`;
                tabEl.innerHTML = `<span onclick="switchTab(${tab.id})">${tab.title}</span>`;
                strip.insertBefore(tabEl, strip.lastElementChild);
            });
        }

        function goBack() { document.getElementById(`frame-${activeTabId}`).contentWindow.history.back(); }
        function goForward() { document.getElementById(`frame-${activeTabId}`).contentWindow.history.forward(); }
        function reloadPage() { showLoading(); document.getElementById(`frame-${activeTabId}`).src += ''; }

        document.getElementById('bar').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') navigateToUrl(e.target.value);
        });

        window.onload = () => { createNewTab(); setTimeout(hideLoading, 1500); };
    </script>
</body>
</html>
