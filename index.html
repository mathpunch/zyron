<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zyron</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <script src="/ixlmath/baremux/index.js"></script>
    <script src="/ixlmath/scram/scramjet.all.js"></script>
    <script>navigator.serviceWorker.register("/ixlmath/sw.js")</script>

    <style>
        /* styles unchanged */
    </style>
</head>
<body>

<div id="loading-screen"><div class="black-hole"></div></div>

<div id="top-ui">
    <div class="tab-strip" id="tab-strip">
        <div class="nav-button" onclick="createNewTab()" style="font-size: 24px;">+</div>
    </div>

    <nav class="navbar">
        <div class="nav-buttons">
            <div class="nav-button" onclick="goBack()">←</div>
            <div class="nav-button" onclick="goForward()">→</div>
            <div class="nav-button" onclick="reloadPage()">↻</div>
        </div>
        <div class="search-container">
            <input type="text" placeholder="Search with Brave or enter URL" id="bar" autocomplete="off">
        </div>
        <div class="nav-buttons">
            <div class="nav-button" onclick="showSettings()">
                <img src="settingsicon.png" class="settings-icon-img" alt="Settings">
            </div>
            <div class="nav-button" onclick="toggleFullScreen()">⛶</div>
        </div>
    </nav>
</div>

<div class="frame-container" id="frame-container">
    <div id="new-tab-ui" class="new-tab-screen">
        <div class="new-tab-content" style="text-align: center;">
            <h1>Zyron</h1>
            <p style="color: var(--text-muted); letter-spacing: 2px; font-size: 12px;">Made By Arctic 1.0</p>
        </div>
    </div>
</div>

<div class="modal-overlay" id="settings-modal" onclick="hideSettings()">
    <div class="modal-content" onclick="event.stopPropagation()">
        <h2 style="margin-top:0; color: var(--accent); letter-spacing: 2px; font-size: 18px; text-transform: uppercase;">Settings</h2>

        <span class="section-label">General</span>
        <button class="setting-btn primary" onclick="openAboutBlank()">Open in About:Blank</button>
        <button class="setting-btn" onclick="hideNavbar()">Hide Navigation Bar</button>

        <span class="section-label">Wisp Servers</span>
        <div>
            <button id="wisp-main" class="setting-btn active-wisp" onclick="setWisp('main')">Main Server <span class="ping-tag" id="ping-main">--ms</span></button>
            <div class="btn-row">
                <button id="wisp-backup2" class="setting-btn" onclick="setWisp('backup2')">Backup 2 <span class="ping-tag" id="ping-backup2">--ms</span></button>
                <button id="wisp-backup3" class="setting-btn" onclick="setWisp('backup3')">Backup 3 <span class="ping-tag" id="ping-backup3">--ms</span></button>
            </div>
            <div class="btn-row">
                <button id="wisp-backup4" class="setting-btn" onclick="setWisp('backup4')">Backup 4 <span class="ping-tag" id="ping-backup4">--ms</span></button>
                <button id="wisp-backup5" class="setting-btn" onclick="setWisp('backup5')">Backup 5 <span class="ping-tag" id="ping-backup5">--ms</span></button>
            </div>
            <div class="btn-row">
                <button id="wisp-backup6" class="setting-btn" onclick="setWisp('backup6')">Backup 6 <span class="ping-tag" id="ping-backup6">--ms</span></button>
                <button id="wisp-backup7" class="setting-btn" onclick="setWisp('backup7')">Backup 7 <span class="ping-tag" id="ping-backup7">--ms</span></button>
            </div>

            <div class="custom-wisp-box">
                <input type="text" id="custom-wisp-url" class="custom-wisp-input" placeholder="wss://your-wisp-server/wisp/">
                <button class="setting-btn" style="margin:0; width:auto;" onclick="setCustomWisp()">Use</button>
            </div>
        </div>
    </div>
</div>

<script>
    const wispUrls = {
        main: atob("d3NzOi8venlyb25nYXJkZW5pbmdhbG9yZS5zcGVlZGluc3VyZS5oay93aXNwLw=="),
        backup2: atob("d3NzOi8vd2lzcC5yaHcub25lLw=="),
        backup3: atob("d3NzOi8vaXhsbWF0aGxvZ2luLml4bC5iZXN0L3dpc3Av"),
        backup4: atob("d3NzOi8vczBsYWNlLWoybnAub25yZW5kZXIuY29tL3dpc3Av"),
        backup5: atob("d3NzOi8vZDNzOWVqdjExYXY3ZmQuY2xvdWRmcm9udC5uZXQvd2lzcC8="),
        backup6: atob("d3NzOi8vZ2xzZXJpZXMubmV0L3dpc3Av"),
        backup7: atob("d3NzOi8vZ29pbnRvc3BhY2UuYXBwL3dpc3Av")
    };

    let tabs = [];
    let activeTabId = null;
    let currentWisp = wispUrls.main;

    const connection = new BareMux.BareMuxConnection("/ixlmath/baremux/worker.js");
    function initProxy() { connection.setTransport("/ixlmath/libcurl/index.mjs", [{ websocket: currentWisp }]); }

    const { ScramjetController } = $scramjetLoadController();
    const scramjet = new ScramjetController({
        files: { all: "/ixlmath/scram/scramjet.all.js", wasm: "/ixlmath/scram/scramjet.wasm.wasm", sync: "/ixlmath/scram/scramjet.sync.js" },
        prefix: "/ixlmath/go/"
    });

    window.onload = () => {
        initProxy();
        scramjet.init();
        createNewTab();
    };
</script>

</body>
</html>
